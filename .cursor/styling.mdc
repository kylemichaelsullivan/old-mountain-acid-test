---
globs: **/*.tsx, **/*.ts, **/*.css
exclude: **/__tests__/**, **/*.test.*, **/*.spec.*, **/config/**, **/server/**, **/trpc/**
alwaysApply: false
---

# Styling Standards

## Typography

- **Apostrophes**: ALL user-facing text MUST use the typographic apostrophe ' instead of the straight apostrophe '
- **Consistency**: Maintain consistent typography throughout the application
- **Config-driven**: Typography styles are driven by config system
- **CSS variables**: Typography uses CSS variables (--epk-header, --epk-main, --epk-fancy)

## Tailwind CSS

- **Color utilities**: Prefer color utility classes from index.css that use CSS Custom Properties
- **Compelling reasons**: Only avoid color utilities when there's a compelling reason not to
- **Direct strings**: Use direct strings for simple cases without conditionals
- **No margins**: Avoid using Tailwind margin classes (`m-*`, `mx-*`, `my-*`, `mt-*`, `mr-*`, `mb-*`, `ml-*`)
- **No space utilities**: Avoid using `space-x-*` or `space-y-*` utilities - they rely on margins
- **Prettier integration**: Leverage `prettier-plugin-tailwindcss` for automatic class sorting
- **Utility function**: Use `clsx()` for conditional classes

### ClassName Patterns

```tsx
// Component name should be first in className for debugging
className='ComponentName bg-white rounded-lg border p-4'

// Conditional cases - use clsx
className={clsx(
  'ComponentName base-classes',
  isActive && 'active-classes',
  isDisabled && 'disabled-classes',
  className
)}

// Component props - use clsx
className={clsx('ComponentName base-classes', className)}
```

### JSX Attribute Order

Follow this specific order for JSX attributes:

1. **type** - Element type (for form elements)
2. **className** - CSS classes
3. **Standard HTML attributes** - (alphabetically)
4. **Event handlers** - (alphabetically, starting with 'on')
5. **ARIA attributes** - (alphabetically)
6. **Custom data attributes** - (alphabetically)
7. **ref** - React ref (penultimate)
8. **id** - Element identifier (always last)

#### JSX Attribute Order Example

```tsx
<button
	type='button'
	className='Button rounded-lg border bg-white p-4'
	disabled={isDisabled}
	title='Submit form'
	onClick={handleClick}
	onKeyDown={handleKeyDown}
	aria-label='Submit form'
	aria-describedby='submit-help'
	data-testid='submit-button'
	ref={buttonRef}
	id='submit-button'
>
	Submit
</button>
```

### Layout Principles

- **Flexbox/Grid**: Use Flexbox and Grid for layouts
- **Avoid margins**: Don't use CSS margins except for printing and where flex/grid won't work
- **Avoid space- utilities**: Don't use `space-x-*` or `space-y-*` utilities - they rely on margins
- **Use flex/gap**: Use `flex flex-col gap-*` for vertical spacing and `flex items-center gap-*` for horizontal spacing
- **Consistent spacing**: Use Tailwind's spacing scale
- **Theme variables**: Use CSS custom properties for theme colors

### Spacing Patterns

```tsx
// Vertical spacing
className = 'flex flex-col gap-2'; // Small gaps
className = 'flex flex-col gap-4'; // Medium gaps
className = 'flex flex-col gap-6'; // Large gaps

// Horizontal spacing
className = 'flex items-center gap-2';
className = 'flex justify-between';

// Responsive spacing
className = 'flex flex-col gap-3 sm:gap-4';
className = 'flex items-center gap-1.5 sm:gap-2';
```

### Component Structure

- **Avoid superfluous wrappers**: Don't create unnecessary wrapper divs that add DOM complexity
- **Simplify nesting**: Remove redundant wrapper elements when possible
- **Keep meaningful wrappers**: Retain wrappers that serve styling, semantic, or organizational purposes

#### Wrapper Removal Examples

```tsx
// ❌ Avoid - redundant wrapper
<div className='flex flex-col gap-6'>
  <div className='flex flex-col gap-6'>
    <Component />
  </div>
</div>

// ✅ Good - simplified structure
<div className='flex flex-col gap-6'>
  <Component />
</div>
```

## Font Awesome Icons

- **Preferred icon library**: Use Font Awesome icons for all icon needs
- **Import pattern**: Import icons directly from `@fortawesome/free-solid-svg-icons`
- **Component usage**: Use `FontAwesomeIcon` component from `@fortawesome/react-fontawesome`
- **Accessibility**: Always include `aria-hidden="true"` on decorative icons
- **Size consistency**: Use consistent sizing classes or let CSS handle sizing
- **Icon selection**: Prefer solid icons over regular/light variants
- **Semantic meaning**: Choose icons that clearly represent their function
- **Consistency**: Use similar icons for similar actions across the application

#### Font Awesome Usage Example

```tsx
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faChevronRight } from '@fortawesome/free-solid-svg-icons';

<FontAwesomeIcon icon={faChevronRight} aria-hidden='true' />;
```

## CSS Variables and Custom Properties

- **Color variables**: Use CSS variables for colors (--epk-background, --epk-accent, --epk-body, --epk-white, --epk-black)
- **Font variables**: Use CSS variables for fonts (--epk-header, --epk-main, --epk-fancy)
- **Config-driven**: CSS variables are set from config system
- **Theme consistency**: Maintain consistent use of CSS variables throughout the application

### CSS Variable Usage

```css
/* In index.css */
:root {
	--epk-background: #ed8282;
	--epk-accent: #2566be;
	--epk-body: #000000;
	--epk-white: #ffffff;
	--epk-header: Angkor, sans-serif;
	--epk-main: Montserrat, serif;
	--epk-fancy: cursive;
}
```

```tsx
// In components - use CSS variables via Tailwind or custom CSS
<div className='accordion' style={{ color: 'var(--epk-white)' }}>
	{/* or use custom CSS classes that reference variables */}
</div>
```

## Custom CSS Patterns

- **Accordion styles**: Custom CSS for accordion component with grid-based animations
- **Metronome animation**: Custom CSS for loading metronome animation
- **Combo links**: Custom CSS for link combinations and layouts
- **Component-specific**: Use custom CSS classes for complex or reusable patterns
- **CSS organization**: Keep custom CSS in `index.css` organized by component/pattern

### Custom CSS Examples

```css
/* Accordion animation using CSS Grid */
.accordion .accordion-container {
	display: grid;
	grid-template-rows: 0fr;
	transition: grid-template-rows 0.5s linear;
}

.accordion.open .accordion-container {
	grid-template-rows: 1fr;
}

/* Metronome animation */
@keyframes metronome {
	0% {
		transform: translateX(-50%) rotate(-15deg);
	}
	50% {
		transform: translateX(-50%) rotate(15deg);
	}
	100% {
		transform: translateX(-50%) rotate(-15deg);
	}
}
```

## SVG Assets

- **SVG React components**: Use `?react` suffix for SVG imports (e.g., `@/assets/logo.svg?react`)
- **SVG styling**: SVG colors can be controlled via CSS variables
- **Accessibility**: Include `aria-label` on SVG logos and icons

#### SVG Usage Example

```tsx
import LogoIcon from '@/assets/logo.svg?react';

<LogoIcon aria-label='Old Mountain Acid Test Logo' />;
```

## CSS Best Practices

- **No !important**: Avoid using `!important` declarations in CSS
- **TypeScript**: Avoid using the `any` type in TypeScript code
- **Semantic HTML**: Use semantic HTML elements for better accessibility
- **Responsive design**: Use Tailwind responsive prefixes (sm:, md:, lg:, xl:)
- **Custom classes**: Use custom CSS classes for complex patterns that can't be achieved with utilities
- **CSS organization**: Organize CSS by component/pattern, keep related styles together
